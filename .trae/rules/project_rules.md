# 产品需求文档 (PRD): 思源笔记新闻插件

## 1. 项目概述

本项目旨在为思源笔记开发一款新闻聚合插件。该插件将允许用户在思源笔记界面内直接浏览来自多个来源的实时新闻，并能方便地将感兴趣的新闻内容一键保存为新的笔记记录。插件的灵感来源于 `https://newsnow.busiyi.world/`，并将采用 Vite + Vue.js 技术栈进行开发，以确保与源项目的技术方向保持一致性并利用现代前端框架的优势。

## 2. 项目背景

思源笔记作为一款优秀的个人知识管理工具，用户常常需要在其中记录和整理从各种渠道获取的信息。当前，用户获取新闻资讯并将其导入思源笔记的过程可能较为繁琐，需要频繁切换应用或浏览器标签页，手动复制粘贴内容。本插件旨在简化这一流程，提供一个集成的新闻阅读和笔记创建体验，提高用户信息获取和管理的效率。

## 3. 功能需求

### 3.1 核心功能

*   **新闻浏览**:
    *   在思源笔记中提供一个专门的插件界面用于展示新闻列表。
    *   支持从多个预设或可配置的新闻源获取数据 (具体新闻源待定，可参考 NewsNow 项目)。
    *   新闻列表应实时或近实时更新。
    *   展示新闻标题、来源、发布时间等基本信息。
    *   点击新闻标题可查看新闻摘要或跳转到原文链接（待定，需考虑插件实现复杂度）。
*   **一键保存为笔记**:
    *   每条新闻旁边提供一个“添加到笔记”或类似功能的按钮。
    *   点击按钮后，将该新闻的主要内容（如标题、链接、摘要，甚至部分正文）自动创建为一条新的思源笔记。
    *   笔记的格式和保存位置应具有一定的可配置性（例如，保存到指定笔记本，使用特定模板等）。

### 3.2 用户界面 (UI)

*   界面设计应简洁、易用，与思源笔记的整体风格保持协调。
*   新闻列表展示清晰，易于阅读和滚动。
*   操作按钮（如刷新、添加到笔记）应直观易懂。
*   界面风格可以参考 NewsNow 的源码 (https://github.com/ourongxing/newsnow/tree/main)。

### 3.3 配置项 (可选，视开发优先级而定)

*   允许用户选择或自定义新闻源。
*   允许用户配置新笔记的默认保存位置和格式。

### 3.4 性能需求

*   插件加载和新闻获取不应显著影响思源笔记的性能。
*   新闻数据获取应高效，避免长时间等待。

## 4. 编码标准

*   **语言**: 主要使用 TypeScript (基于 JavaScript) 和 Vue.js 3 (Composition API 优先)。
*   **代码风格**: 
    *   遵循 ESLint 和 Prettier 的规范，确保代码风格统一。
    *   变量和函数命名采用驼峰命名法 (camelCase)。
    *   类和组件命名采用帕斯卡命名法 (PascalCase)。
    *   注释清晰，关键逻辑和复杂函数需要有详细注释。
*   **版本控制**: 使用 Git 进行版本控制，遵循合适的分支管理策略 (如 Gitflow 或简化版)。
*   **组件化**: 采用 Vue.js 的组件化思想，将 UI 拆分为可复用的组件。
*   **状态管理**: 根据项目复杂度，可考虑使用 Pinia 进行状态管理。
*   **API 交互**: 
    *   与思源笔记的插件 API 交互需遵循官方文档规范。
    *   与外部新闻源 API 交互时，进行错误处理和数据校验。
*   **构建工具**: 使用 Vite 作为构建工具。
*   **依赖管理**: 使用 pnpm 或 npm 管理项目依赖。
*   **测试**: (可选，视项目资源而定) 鼓励编写单元测试和集成测试，确保代码质量。
*   **文档**: 关键模块和 API 接口需要编写相应的开发文档。

## 5. 技术栈说明

### 5.1 业务架构

业务架构主要围绕新闻的聚合、展示和管理展开，核心流程包括：

*   **新闻源管理**：定义和管理新闻内容的来源，可能包括 RSS 订阅、特定网站 API 等。
*   **新闻数据获取与处理**：定期或按需从新闻源抓取数据，进行清洗、格式化和去重。
*   **新闻内容展示**：在思源笔记插件界面中，以列表形式清晰展示新闻标题、来源、时间等信息。
*   **用户交互与偏好设置**：允许用户浏览新闻、选择感兴趣的内容、配置新闻源（可选）、设置笔记保存偏好（可选）。
*   **笔记生成与保存**：根据用户操作，将选定的新闻内容（标题、链接、摘要等）转化为思源笔记格式，并保存到用户指定的笔记本或默认位置。
*   **与思源笔记集成**：插件需要与思源笔记的 API 进行交互，实现界面的嵌入、笔记的创建和管理等功能。

### 5.2 应用架构

应用架构将采用典型的 MVVM (Model-View-ViewModel) 或类似的关注点分离模式，结合 Vue.js 3 的特性：

*   **视图层 (View)**：由 Vue 组件构成 (`.vue` 文件)，负责展示用户界面和响应用户输入。例如 `NewsList.vue` 用于展示新闻列表，`NewsItem.vue` 用于展示单条新闻，`MainPanel.vue` 作为插件主界面容器。
*   **视图模型层 (ViewModel)**：利用 Vue 3 的 Composition API (`setup` 函数) 和 Pinia (状态管理)，负责处理视图逻辑、数据绑定、状态管理以及与服务层的交互。例如，`newsStore.ts` 可能包含获取和管理新闻列表的状态和逻辑。
*   **模型/服务层 (Model/Service)**：
    *   **数据模型 (Data Model)**：定义新闻、用户配置等数据的结构。
    *   **服务 (Services)**：封装业务逻辑，如 `newsService.ts` 负责与后端 API 或思源笔记 API 进行通信，获取新闻数据、保存笔记等。
*   **插件入口与集成**：`main.ts` 作为插件的入口点，负责初始化 Vue 应用并将其挂载到思源笔记提供的插件容器中。`plugin.json` 定义插件的元数据和与思源笔记的集成方式。
*   **构建与打包**：使用 Vite 进行项目的构建、打包和开发服务器的运行。

### 5.3 技术架构

技术架构主要关注实现上述应用架构所需的技术选型和基础设施：

*   **前端技术栈**：
    *   **核心框架**: Vue.js 3 (Composition API) - 提供响应式数据绑定和组件化开发能力。
    *   **构建工具**: Vite - 提供快速的冷启动、即时模块热更新 (HMR) 和优化的构建输出。
    *   **编程语言**: TypeScript - 为 JavaScript 添加静态类型检查，提高代码健壮性和可维护性。
    *   **状态管理**: Pinia - 轻量级、类型安全且易于使用的 Vue 状态管理库。
    *   **HTTP客户端**: Axios 或 Fetch API - 用于与外部新闻源 API 和思源笔记 API 进行数据交互。
    *   **UI库**: (待定) Element Plus 或 Ant Design Vue 等，提供丰富的预设组件，加速 UI 开发。
    *   **代码规范**: ESLint 和 Prettier - 保证代码风格一致性和质量。
*   **思源笔记插件 API**：利用思源笔记提供的插件开发接口，实现插件的加载、UI 嵌入、笔记操作等功能。
*   **新闻源接口**：
    *   插件将通过 HTTP/HTTPS 请求从各个新闻源获取数据。
    *   需要考虑不同新闻源 API 的认证方式、请求频率限制、数据格式等。
    *   可能需要一个服务端组件或代理来统一处理新闻源的获取和缓存，以避免直接在客户端暴露过多逻辑或处理跨域问题（如果 NewsNow 项目本身不提供统一API）。
*   **数据持久化 (可选，主要针对用户配置)**：
    *   插件配置（如选择的新闻源、笔记保存位置等）可以使用思源笔记提供的插件数据存储 API，或者浏览器本地存储 (localStorage)。
*   **版本控制**: Git - 用于代码的版本管理和协作。
*   **开发环境**: Node.js 和 pnpm/npm - 用于运行开发服务器、构建工具和管理项目依赖。

### 5.4 库和框架

*   **前端框架**: Vue.js 3 (Composition API)
*   **构建工具**: Vite
*   **UI 库**: (待定，可考虑 Element Plus, Ant Design Vue 等)
*   **状态管理**: Pinia (根据需要)
*   **HTTP 请求**: Axios 或 Fetch API
*   **代码规范**: ESLint, Prettier

### 5.5 文件结构

```
.siyuan-plug-newsnow/
├── public/
│   └── index.html
├── src/
│   ├── assets/         # 静态资源 (图片、字体等)
│   ├── components/     # Vue 组件
│   │   ├── NewsItem.vue
│   │   └── NewsList.vue
│   ├── services/       # API 请求服务
│   │   └── newsService.ts
│   ├── store/          # Pinia 状态管理
│   │   └── newsStore.ts
│   ├── views/          # 页面级组件或插件主界面
│   │   └── MainPanel.vue
│   ├── App.vue         # 根组件
│   ├── main.ts         # 应用入口
│   └── vite-env.d.ts   # Vite 环境变量声明
├── .eslintrc.cjs
├── .gitignore
├── .prettierrc.json
├── index.html          # 插件入口 HTML (如果思源插件需要)
├── package.json
├── plugin.json         # 思源插件配置文件
├── README.md
├── tsconfig.json
├── tsconfig.node.json
└── vite.config.ts
```

### 5.6 流程绘制

(待补充，可使用 Mermaid.js 或其他绘图工具描述核心流程，例如：新闻获取流程、保存笔记流程等)

## 5.7 项目开发计划与任务跟踪

本节将详细列出基于 `plugin-sample-vite-vue` 模板开发思源笔记新闻插件的各项任务，并说明如何跟踪任务进度。

### 5.7.1 开发任务清单

#### 阶段一：项目初始化与基础架构搭建 (基于 `plugin-sample-vite-vue` 模板)
*   **任务 1.1:** 初始化项目仓库，并将 `plugin-sample-vite-vue` 模板内容集成到项目中。 (状态: 根据实际情况填写，例如：已完成)
    *   *说明:* 确保项目根目录包含模板的所有文件和目录结构。
*   **任务 1.2:** 更新 `package.json`。
    *   修改 `name` 为 `siyuan-plug-newsnow` (或用户指定的插件名)。
    *   更新 `description`, `author`, `homepage`, `repository` 等字段以反映新插件信息。
    *   检查并根据需要调整 `dependencies` 和 `devDependencies`。
*   **任务 1.3:** 配置 `plugin.json`。
    *   填写插件的 `name` (英文，用于内部标识), `displayName` (显示名称，支持多语言), `author`, `description`, `version`。
    *   准备或指定 `icon.png` 和 `preview.png`。
    *   确认 `frontend` 和 `backend` (如果需要) 的入口点设置。
*   **任务 1.4:** 审查并根据需要调整 `vite.config.ts`。
    *   确认输出目录等配置是否符合思源插件开发要求。
    *   根据 PRD 考虑是否需要添加 Element Plus 或 Ant Design Vue 等 UI 库的按需引入配置。
*   **任务 1.5:** 配置并集成 ESLint 和 Prettier。
    *   确保项目遵循 PRD 中定义的编码风格。
    *   配置 `eslint.config.mjs` (或 `.eslintrc.cjs`) 和 `.prettierrc.json`。
*   **任务 1.6:** 清理模板中的示例代码和非必要文件。
    *   修改或替换 `src/App.vue` 中的示例内容。
    *   移除 `src/components` 下的模板示例组件。
    *   评估 `src/i18n` 目录，如果初期不需要国际化，可以暂时移除或置空。
    *   检查 `src/api.ts`, `src/utils` 等，移除与新闻插件无关的示例逻辑。
*   **任务 1.7:** 创建 PRD 中定义的基础文件结构。
    *   创建 `src/services/newsService.ts` 用于 API 请求。
    *   创建 `src/store/newsStore.ts` 用于 Pinia 状态管理。
    *   创建 `src/views/MainPanel.vue` 作为插件主界面容器。
    *   在 `src/components/` 下规划 `NewsItem.vue` 和 `NewsList.vue`。

#### 阶段二：核心功能 - 新闻浏览
*   **任务 2.1:** 设计并实现插件主界面 (`src/views/MainPanel.vue`)。
    *   搭建基本布局，为新闻列表和可能的控制元素（如刷新按钮）预留位置。
*   **任务 2.2:** 实现新闻列表组件 (`src/components/NewsList.vue`)。
    *   负责循环渲染新闻条目。
    *   处理列表的滚动和加载状态显示。
*   **任务 2.3:** 实现单条新闻项组件 (`src/components/NewsItem.vue`)。
    *   展示新闻标题、来源、发布时间等。
    *   包含“添加到笔记”按钮的占位。
*   **任务 2.4:** 实现新闻数据获取服务 (`src/services/newsService.ts`)。
    *   **子任务 2.4.1:** 定义新闻数据接口/类型 (TypeScript interfaces)。
    *   **子任务 2.4.2:** 实现从新闻源获取数据的函数。初期可使用 mock 数据或接入 NewsNow 项目的 API (如果可用且符合需求)，或选择一个简单的公开新闻 API。
    *   处理 API 请求的错误和加载状态。
*   **任务 2.5:** 使用 Pinia (`src/store/newsStore.ts`) 管理新闻数据。
    *   定义 state 存储新闻列表、加载状态、错误信息等。
    *   定义 actions 调用 `newsService` 获取和更新新闻数据。
    *   定义 getters 方便组件获取处理后的数据。
*   **任务 2.6:** 在 `MainPanel.vue` 中集成 `NewsList.vue` 并通过 `newsStore` 获取和展示新闻数据。
*   **任务 2.7:** 实现新闻列表更新机制。
    *   添加手动刷新按钮。
    *   (可选) 实现定时自动刷新。

#### 阶段三：核心功能 - 一键保存为笔记
*   **任务 3.1:** 在 `NewsItem.vue` 中实现“添加到笔记”按钮的交互逻辑。
*   **任务 3.2:** 实现与思源笔记插件 API 的交互。
    *   **子任务 3.2.1:** 学习思源笔记 `Plugin` 类提供的 API，特别是与创建/写入文档块相关的 API (如 `this.plugin.siyuan.createDocWithMd()`, `this.plugin.siyuan.insertBlock()` 等)。
    *   **子任务 3.2.2:** 编写函数将选中的新闻数据（标题、来源链接、摘要等）格式化为 Markdown 字符串。
*   **任务 3.3:** 实现调用思源 API 将 Markdown 内容创建为新笔记。
    *   考虑用户配置（如保存到指定笔记本，使用特定模板等，初期可简化为保存到默认位置）。

#### 阶段四：用户界面 (UI) 与用户体验 (UX) 优化
*   **任务 4.1:** 插件界面风格调整。
    *   参考 NewsNow 项目 (https://newsnow.busiyi.world/) 和思源笔记自身风格进行设计。
    *   选择并集成 UI 库 (如 Element Plus, Ant Design Vue，或使用原生 CSS/SCSS 配合思源的样式变量)。
*   **任务 4.2:** 提升易用性和操作直观性。
    *   确保按钮、链接等交互元素清晰易懂。
    *   优化新闻列表的可读性和滚动体验。
*   **任务 4.3:** 添加用户反馈机制。
    *   实现数据加载时的 loading 提示。
    *   显示 API 请求失败或数据处理错误时的错误信息。

#### 阶段五：配置项 (可选，根据优先级)
*   **任务 5.1:** (如果实现) 新闻源配置功能。
    *   设计配置界面，允许用户添加/删除/启用/禁用新闻源。
    *   实现配置数据的持久化存储 (使用思源插件 API `this.plugin.data` 或 `this.plugin.loadData`/`this.plugin.saveData`)。
*   **任务 5.2:** (如果实现) 笔记保存配置功能。
    *   设计配置界面，允许用户设置默认保存笔记本、笔记标题格式、内容模板等。
    *   实现配置数据的持久化存储。

#### 阶段六：测试、文档与发布
*   **任务 6.1:** 全面功能测试。
    *   测试新闻浏览、数据刷新、保存笔记等核心功能。
    *   测试不同新闻源（如果可配置）的兼容性。
    *   测试在不同思源笔记版本下的兼容性（如果可能）。
*   **任务 6.2:** (可选) 编写自动化测试。
    *   单元测试 (Vitest) 针对核心服务和工具函数。
    *   组件测试 (Vue Test Utils) 针对关键 Vue 组件。
*   **任务 6.3:** 准备插件发布。
    *   使用 `plugin-sample-vite-vue` 模板提供的 `npm run release` 或 `node release.js` 脚本打包插件。
    *   测试打包后的 `package.zip` 是否能正确安装和运行。
*   **任务 6.4:** 更新文档。
    *   更新 `README.md`，包括插件功能介绍、使用方法、开发说明等。
    *   (可选) 编写更详细的开发文档或用户手册。

### 5.7.2 任务跟踪方法

*   **工具选择**: 推荐使用 GitHub Issues 作为主要的任务跟踪工具。
*   **任务创建**:
    *   为上述开发任务清单中的每个主要任务（例如“任务 1.2: 更新 `package.json`”）或重要的子任务在 GitHub 仓库的 "Issues" 板块创建一个新的 Issue。
    *   Issue 标题应清晰概括任务内容。
    *   Issue 描述中可以包含任务的详细要求、验收标准、相关 PRD 章节链接等。
*   **任务分配与标签**:
    *   如果团队协作，将 Issue 分配给相应的负责人 (Assignees)。
    *   使用标签 (Labels) 对 Issue 进行分类，例如 `bug`, `feature`, `enhancement`, `documentation`, `phase-1`, `phase-2` 等。
    *   可以创建自定义标签以适应项目需求，如 `ui`, `backend-integration`, `siyuan-api`。
*   **进度管理**:
    *   **GitHub Projects (看板)**: 可以创建一个 GitHub Project 看板，将 Issues 以卡片形式组织在不同的列中，如 "待办 (To Do)"、"进行中 (In Progress)"、"待审核 (Review)"、"已完成 (Done)"。这有助于可视化整体项目进度。
    *   **里程碑 (Milestones)**: 对于较大的阶段（如“阶段一：项目初始化”），可以创建里程碑，并将相关的 Issues 归入该里程碑，以跟踪阶段性目标的完成情况。
*   **Issue 更新与沟通**:
    *   开发者在开始处理某个 Issue 时，应在 Issue 评论区声明。
    *   开发过程中遇到的问题、讨论、决策等都应记录在相应的 Issue 评论中，保持信息透明。
    *   完成任务后，在 Issue 中更新状态，并提交 Pull Request。
*   **Pull Request (PR) 关联**:
    *   创建 Pull Request 时，在描述中关联相关的 Issue(s) (例如，使用 "Closes #issue_number", "Fixes #issue_number")。
    *   代码审查通过并合并 PR 后，关联的 Issue 会自动关闭（如果使用了正确的关键词）。
*   **定期回顾**:
    *   定期（例如每日站会或每周回顾）检查 Issues 和项目看板，同步进度，识别风险和瓶颈。

通过上述任务清单和跟踪方法，可以有效地管理思源笔记新闻插件的开发过程，确保项目按计划推进。


## 6. 后端设计指南

### 6.1 环境配置

- **Node.js 版本**：确保使用 Node.js >= 20，可通过 `node -v` 命令检查版本。
- **依赖安装**：使用 `corepack enable` 启用 `pnpm`，然后执行 `pnpm i` 安装项目依赖。
- **环境变量**：参考 `example.env.server` 文件，本地运行时重命名为 `.env.server` 并填写相应配置，如 `G_CLIENT_ID`、`G_CLIENT_SECRET`、`JWT_SECRET`、`INIT_TABLE` 和 `ENABLE_CACHE`。
- **数据库配置**：
    - 支持的数据库连接器可查看 `https://db0.unjs.io/connectors`  ，推荐使用 Cloudflare D1 Database。
    - 在 Cloudflare Worker 控制面板创建 D1 数据库，在 `wrangler.toml` 中配置 `database_id` 和 `database_name`，若无 `wrangler.toml`，可将 `example.wrangler.toml` 重命名并修改配置。

### 6.2 接口规范

- **接口定义**：项目使用 `defineEventHandler` 定义接口，例如 `server/api/latest.ts` 和 `server/api/login.ts`。
- **请求处理**：使用 `myFetch` 进行网络请求，如在各个数据源文件（`server/sources/*.ts`）中获取新闻数据。
- **响应格式**：接口返回的数据格式通常为 JSON，如 `server/api/latest.ts` 中返回 `{ v: Version }`。

### 6.3 冷热数据

- **热数据**：指实时更新的新闻数据，存储在缓存中以提高访问速度。默认缓存时长为 30 分钟，登录用户可强制刷新获取最新数据。
- **冷数据**：指相对稳定的数据，如用户信息存储在数据库中。在 `server/database/user.ts` 中定义了用户表的操作，包括初始化、添加用户、获取用户信息等。
- **缓存管理**：使用 `server/database/cache.ts` 中的 `Cache` 类进行缓存管理，包括初始化缓存表、设置缓存、获取缓存和删除缓存。

### 6.4 数据加密

- **JWT 加密**：使用 JWT（JSON Web Token）进行用户认证和数据加密，`JWT_SECRET` 通常设置为与 `G_CLIENT_SECRET` 相同。
- **Base64 编码**：在 `server/utils/base64.ts` 中提供了 Base64 编码和解码的工具函数，可用于对敏感数据进行简单的编码处理。

### 6.5 问题排查

- **日志记录**：项目中使用 `logger` 进行日志记录，可通过查看日志文件或控制台输出排查问题。
- **错误处理**：在接口和数据获取过程中，使用 `try...catch` 块捕获异常，并进行相应的错误处理，如在 `server/sources/kuaishou.ts` 中处理无法获取快手热榜数据的情况。
- **调试工具**：可使用 Node.js 的调试工具（如 `node --inspect`）和浏览器的开发者工具进行调试。

## 7. 前端设计指南

前端的整体设计、用户界面、用户体验以及组件风格可以参考 NewsNow 项目 (https://newsnow.busiyi.world/) 的实现。

### 7.1 组件

- **UI 框架**：项目使用 React 作为 UI 框架，可通过 `ReactDOM.render` 将组件挂载到思源提供的 DOM 容器。
- **组件结构**：组件可根据功能进行分类，如在 `src/components` 目录下创建不同的组件文件。
- **样式管理**：使用 UnoCSS 进行样式管理，在 `uno.config.ts` 中配置样式规则和快捷方式。

### 7.2 动态加载

- **按需加载**：对于一些不常用的组件或数据，可采用按需加载的方式，减少初始加载时间。
- **懒加载**：使用 React 的 `React.lazy` 和 `Suspense` 实现组件的懒加载，提高页面性能。

### 7.3 性能优化

- **缓存机制**：利用浏览器的本地存储和会话存储，缓存一些常用的数据，减少网络请求。
- **节流和防抖**：对于频繁触发的事件（如滚动、输入等），使用节流和防抖技术减少不必要的计算和渲染。
- **代码分割**：使用 Vite 进行代码分割，将大的代码块分割成小的模块，按需加载。

### 7.4 跨端适配

- **响应式设计**：使用 CSS 的媒体查询和弹性布局，实现页面在不同设备上的自适应显示。
- **PWA 支持**：项目使用 `vite-plugin-pwa` 支持 PWA（渐进式 Web 应用），在 `pwa.config.ts` 中配置 PWA 选项，提高应用在移动设备上的体验。

## 8. 项目开发计划

### 8.1 项目发展

项目将遵循敏捷开发的思想，分阶段迭代推进。每个阶段都有明确的目标和可交付成果。

- **V0.1 (MVP - 最小可行产品): 预计 1-2 周**
    - **目标:** 验证核心功能的可行性，提供基本的新闻浏览和保存体验。
    - **详细任务:**
        - **环境搭建:** 初始化 Vite + Vue.js + TypeScript 项目，配置 ESLint, Prettier。
        - **插件骨架:** 实现思源笔记插件的基本结构 (`plugin.json`, `main.ts`, `App.vue`)，确保插件能在思源笔记中加载并显示一个简单界面。
        - **新闻源接口对接 (初步):** 实现从 1-2 个固定新闻源（例如 NewsNow 项目提供的API或RSS源）获取新闻列表数据的逻辑 (`newsService.ts`)。
        - **新闻列表展示:** 创建 `NewsList.vue` 和 `NewsItem.vue` 组件，展示新闻标题、来源和发布时间。
        - **基础UI:** 实现一个简单的插件主面板 (`MainPanel.vue`)，包含新闻列表区域。
        - **“一键保存为笔记” (基础版):** 实现将选定新闻的标题和原文链接保存为新思源笔记的功能，保存到用户当前打开的笔记本或默认笔记本。
        - **构建与测试:** 确保插件可以成功构建，并在思源笔记中进行基本的功能测试。

- **V0.2 (功能增强): 预计 2-3 周**
    - **目标:** 提升用户体验，增加配置灵活性。
    - **详细任务:**
        - **新闻源管理 (初步):**
            - 允许用户在插件设置中查看预设新闻源列表。
            - (可选) 实现添加/删除自定义 RSS 新闻源的功能。
        - **“一键保存为笔记” (增强版):**
            - 允许用户选择目标笔记本进行保存。
            - (可选) 初步支持简单的笔记模板，例如可以自定义笔记标题格式。
        - **UI/UX 优化:**
            - 改进新闻列表的视觉样式和交互，如加载状态、错误提示。
            - 增加手动刷新新闻列表的按钮。
        - **状态管理引入 (如需):** 如果应用状态变得复杂，引入 Pinia (`newsStore.ts`) 管理新闻数据、用户配置等。
        - **代码重构与优化:** 根据 V0.1 的实践，对代码结构进行优化。

- **V0.3 (高级功能与体验完善): 预计 2-3 周**
    - **目标:** 提供更丰富的新闻内容展示和管理能力。
    - **详细任务:**
        - **新闻摘要/内容预览:**
            - 点击新闻标题时，在插件内展示新闻摘要或部分正文内容（如果新闻源提供）。
            - (可选) 提供跳转到原文链接的选项。
        - **配置项完善:**
            - 允许用户配置默认保存笔记本。
            - 完善笔记模板自定义功能，例如支持占位符替换（如 `{title}`, `{url}`, `{summary}`）。
        - **(可选) 关键词过滤/搜索:** 允许用户根据关键词过滤或搜索新闻列表。
        - **(可选) 新闻分类:** 如果新闻源提供分类信息，尝试在UI上进行展示或过滤。
        - **性能优化:** 关注插件加载速度、新闻获取效率，避免卡顿。

- **V1.0 (正式版): 预计 1-2 周**
    - **目标:** 产品功能稳定，准备正式发布。
    - **详细任务:**
        - **全面测试:** 进行更完整的功能测试、兼容性测试和性能测试。
        - **Bug修复:** 集中修复测试阶段发现的 Bug。
        - **文档完善:** 准备用户手册、开发者文档（如果需要）。
        - **代码审查与最终优化:** 对整体代码进行审查和优化。
        - **打包与发布准备:** 准备插件的最终打包，考虑发布到思源笔记官方插件市场或通过其他渠道分发。
        - **收集用户反馈机制:** 明确用户反馈渠道，为后续迭代做准备。

### 8.2 任务跟踪

良好的任务跟踪是确保项目按计划进行的关键。

- **工具选择:** 
    - **GitHub Issues:** 作为首选工具，天然与代码仓库集成。适用于：
        - **需求管理:** 将PRD中的功能点转化为 Issues。
        - **任务分配:** 为每个 Issue 指派负责人 (Assignees)。
        - **进度追踪:** 使用标签 (Labels) 对任务进行分类（如 `bug`, `feature`, `enhancement`, `v0.1`, `v0.2` 等）和标记状态（如 `todo`, `doing`, `done`, `testing`）。
        - **里程碑 (Milestones):** 为每个版本（如 V0.1, V0.2）创建里程碑，关联相关 Issues，跟踪版本进度。
        - **缺陷跟踪:** 用户或测试发现的 Bug 也通过 Issues 进行记录和管理。
    - **(可选) 看板工具 (Trello, Jira, Notion等):** 如果团队规模较大或需要更复杂的流程管理，可以考虑引入看板工具，但初期 GitHub Issues 通常足够。

- **任务管理流程:**
    - **任务创建:** 
        - 根据“项目发展”中定义的各版本详细任务，在 GitHub Issues 中创建对应的任务卡片。
        - 每个 Issue 应有清晰的标题、详细的描述（包括验收标准）、负责人、关联的里程碑和适当的标签。
    - **任务执行:** 
        - 开发者领取任务后，更新 Issue 状态（例如，从 `todo` 到 `doing`）。
        - 开发过程中，鼓励在 Issue 下进行相关的讨论和更新。
    - **代码提交与关联:**
        - **分支策略:** 建议使用功能分支 (feature branches)，例如 `feature/add-news-list` 或 `fix/login-bug`。
        - **Commit Message规范:** 遵循一定的规范，例如 Conventional Commits。在 Commit Message 中通过关键词（如 `closes #issue_number`, `fixes #issue_number`）关联到对应的 GitHub Issue。例如: `feat: Implement basic news list display (closes #12)`。
    - **代码审查 (Code Review):** 
        - 完成开发后，发起 Pull Request (PR) 到主开发分支 (如 `develop` 或 `main`)。
        - PR 中应简要说明改动内容，并链接到相关的 Issue。
        - 至少需要一名其他成员进行代码审查，通过后方可合并。
    - **任务完成:** 
        - PR 合并后，对应的 Issue 可以关闭或更新到“已完成/待测试”状态。

- **沟通与同步:**
    - **定期站会 (可选，视团队情况):** 例如每日简短站会，同步进度、遇到的问题和计划。
    - **周会/迭代回顾会:** 每周或每个迭代结束时，回顾已完成的任务、未完成的任务、遇到的问题，并规划下一阶段的任务。
    - **异步沟通:** 充分利用 GitHub Issues 的评论区、项目内的即时通讯工具进行日常沟通。

### 8.3 更新规划

- **发布周期:**
    - **早期开发阶段 (V0.x):** 采用小步快跑、快速迭代的策略。目标是每 1-2 周发布一个内部测试版本或小范围用户测试版本，以便快速获取反馈并进行调整。
    - **稳定阶段 (V1.x 及以后):** 在功能趋于稳定后，可以根据新功能的开发进度和 Bug 修复情况，计划每 1-2 个月发布一个正式的更新版本。
- **版本号规范:**
    - **严格遵循 Semantic Versioning 2.0.0 (语义化版本控制)** 规范，格式为 `MAJOR.MINOR.PATCH`。
        - `MAJOR` 版本：当进行不兼容的 API 修改时。
        - `MINOR` 版本：当以向后兼容的方式添加功能时。
        - `PATCH` 版本：当进行向后兼容的 Bug 修复时。
    - **预发布版本:** 对于测试版本，可以使用预发布标签，如 `1.0.0-alpha.1`, `1.0.0-beta.2`。
    - **Git Tags:** 每个正式的发布版本都必须在 Git 中打上对应的 Tag，例如 `git tag -a v0.1.0 -m "Version 0.1.0 - MVP release"`。
- **变更日志 (Changelog):**
    - 维护一个 `CHANGELOG.md` 文件，记录每个版本的更新内容，包括新增功能、优化改进和 Bug 修复。
    - 可以参考 Keep a Changelog (https://keepachangelog.com/) 的格式。
- **用户反馈与迭代:**
    - **主要渠道:** GitHub Issues 是收集用户反馈、Bug 报告和功能建议的主要渠道。
    - **插件内反馈:** (V0.2 或 V0.3 考虑) 在插件设置界面提供一个“反馈问题”或“建议功能”的链接，直接引导用户到 GitHub Issues 页面。
    - **社区交流:** (可选) 如果有相关的思源笔记用户社群，可以在社群中收集用户意见。
    - **反馈处理:** 定期（例如每周）整理和评估收集到的用户反馈，将其转化为新的开发任务或 Bug修复任务，纳入后续的迭代计划中。